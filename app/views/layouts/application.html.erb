<!DOCTYPE html>
<html>
<head>
  <title>Instanot</title>
  <%= stylesheet_link_tag "application", media: "all", "data-turbolinks-track" => true %>
  <link href='http://fonts.googleapis.com/css?family=Lobster' rel='stylesheet' type='text/css'>
  <%= javascript_include_tag "application", "data-turbolinks-track" => true %>
  <%= csrf_meta_tags %>
    <script>
    function readURL(input) {
      if (input.files && input.files[0]) {
        var reader = new FileReader();
        reader.onload = function (e) {
        $('#img_prev')
          .attr('src', e.target.result)
          .width(90)
          .height(100);
        };
        reader.readAsDataURL(input.files[0]);
      }
    }
</script>
<script>
  document.getElementById("uploadBtn").onchange = function () {
      document.getElementById("uploadFile").value = this.value;
  };
</script>

</head>
<body>
	<div id="container">
		<div id="user_header">
			<% if current_user %>
			  Logged in as <%= current_user.email %>.
			  <%= link_to "Log Out", logout_path %>
			<% else %>
			  <%= link_to "Sign Up", signup_path %> or
			  <%= link_to "Log In", login_path %>
			<% end %>
		</div>
		<% flash.each do |name,msg| %>
			<%= content_tag :div, msg, id: "flash_#{name}" %>
		<% end %>

		<%= yield %>
	</div>
  <!-- jQuery if needed -->
        <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
    <script type="text/javascript">
      $(function(){
          $(".showpassword").each(function(index,input) {
              var $input = $(input);
              $("<p class='opt'/>").append(
                  $("<input type='checkbox' class='showpasswordcheckbox' id='showPassword' />").click(function() {
                      var change = $(this).is(":checked") ? "text" : "password";
                      var rep = $("<input placeholder='Password' type='" + change + "' />")
                          .attr("id", $input.attr("id"))
                          .attr("name", $input.attr("name"))
                          .attr('class', $input.attr('class'))
                          .val($input.val())
                          .insertBefore($input);
                      $input.remove();
                      $input = rep;
                   })
              ).append($("<label for='showPassword'/>").text("Show password")).insertAfter($input.parent());
          });

          $('#showPassword').click(function(){
          if($("#showPassword").is(":checked")) {
            $('.icon-lock').addClass('icon-unlock');
            $('.icon-unlock').removeClass('icon-lock');    
          } else {
            $('.icon-unlock').addClass('icon-lock');
            $('.icon-lock').removeClass('icon-unlock');
          }
          });
      });
    </script>
</body>
</html>
